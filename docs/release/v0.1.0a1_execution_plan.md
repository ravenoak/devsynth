# DevSynth v0.1.0a1 Execution Plan (Updated 2025-10-07T05:50Z)

## Purpose
This document synthesizes the RFC proposal, current diagnostics, and dialectical + Socratic analysis to determine the highest-impact work required before tagging v0.1.0a1. It identifies which RFC initiatives are in-scope for the alpha tag, organizes them into actionable pull requests, and clarifies sequencing and parallelization constraints. The plan assumes no TestPyPI activity per maintainer directive and keeps every GitHub Actions workflow on `workflow_dispatch` until human maintainers cut the tag.【F:docs/tasks.md†L365-L372】【F:.github/workflows/ci.yml†L1-L11】

## Evidence Baseline (2025-10-07T01:07Z UTC)
- **Plugin stability restored:** `pytest --collect-only -q` completed cleanly on 2025-10-07 after hoisting plugin exports,
  confirming PR-0 is complete and establishing a reliable baseline for follow-up hygiene work.【F:logs/pytest_collect_only_20251007.log†L1-L40】
- `task release:prep` now runs until `poetry install --with dev --extras "tests retrieval chromadb api"` aborts with `Could not parse version constraint: <empty>`; maintainer automation cannot proceed until the lockfile metadata is repaired. Earlier reruns still show `poetry build` succeeding once extras mapping is reconciled, and `task mypy:strict` continues to publish knowledge-graph identifiers (`QualityGate=c54c967d-6a97-4c68-a7df-237a609fd53e`, `TestRun=3ec7408d-1201-4456-8104-ee1b504342cc`, `ReleaseEvidence={9f4bf6fc-4826-4ff6-8aa2-24c5e6396b37,e3208765-a9f9-4293-9a1d-bbd3726552af}`).【F:diagnostics/task_release_prep_20251009T175608Z.log†L1-L10】【F:diagnostics/manual_qa_notes_20251009T175712Z.md†L6-L18】【F:diagnostics/mypy_strict_20251005T035128Z.log†L1-L20】【F:diagnostics/mypy_strict_src_devsynth_20251005T035143Z.txt†L1-L1】【F:diagnostics/mypy_strict_application_memory_20251005T035144Z.txt†L1-L1】
- Smoke-mode `poetry run devsynth run-tests --smoke --speed=fast --no-parallel --maxfail=1` times out during collection fallback and then fails on the `MemoryStore` Protocol generics error, preventing coverage artifacts from being generated and halting behavior verification; the 2025-10-10 replay still aborts immediately because the editable install is missing the `devsynth` console script shim.【F:logs/devsynth_run-tests_smoke_fast_20251004T183142Z.log†L1-L55】【F:diagnostics/devsynth_run_tests_smoke_fast_20251010T134135Z.log†L1-L27】
- The latest fast+medium rehearsal (2025-10-06) before plugin consolidation aborts because pytest-bdd is registered twice when nested `pytest_plugins` declarations import the plugin from both `tests/unit/interface/conftest.py` and repository root hooks, producing `ValueError: Plugin already registered...` and leaving the coverage gate red.【F:logs/devsynth_run-tests_fast_medium_20251006T033632Z.log†L1-L84】
- The latest fast+medium aggregate (2025-10-12) achieved 92.40 % coverage with artifacts, knowledge-graph IDs, and per-module deltas recorded in the manifest. EDRR reasoning loop coverage remained at 87.34 %, so we added a fast-only matrix suite to drive the module to 100 % coverage while we prepare the refreshed fast+medium run once collection issues are resolved.【F:test_reports/coverage_manifest_20251012T164512Z.json†L1-L51】【F:tests/unit/methodology/edrr/test_reasoning_loop_branch_completeness.py†L31-L518】【2c757f†L1-L19】
- 2025-10-07 01:51 UTC rerun of `poetry run pytest --collect-only -q` still aborts because the requirements-wizard behavior suite references `tests/behavior/requirements_wizard/features/general/logging_and_priority.feature`, which no longer exists, and pytest flags seventeen integration/UI tests that lost their speed markers; these must be restored before smoke or coverage rehearsals can succeed.【F:diagnostics/pytest_collect_20251007T0151Z.log†L5389-L5405】【F:diagnostics/pytest_collect_20251007T0151Z.log†L5861-L5939】
- 2025-10-10 14:56 UTC rerun keeps the strict mypy gate red, now publishing `[knowledge-graph] typing gate fail → QualityGate 14a9d603-5ed6-4c10-b0cf-72b9fb618a26`, `TestRun 20191ade-2cca-4cf6-b1a8-bbaede16a12b`, evidence `0249cdd0-85eb-4b8c-9083-4850d1b6a1d2`/`e8e35afd-3a62-430a-b3d8-ae841735d318` while flagging the `pydantic` subclasses and the stale `type: ignore` in `devsynth.testing.run_tests`. The refreshed log lives at `diagnostics/mypy_strict_qualitygate-14a9d603-5ed6-4c10-b0cf-72b9fb618a26_testrun-20191ade-2cca-4cf6-b1a8-bbaede16a12b_20251010T145630Z.log` and supersedes the earlier 2025-10-06 evidence snapshot.【F:diagnostics/mypy_strict_qualitygate-14a9d603-5ed6-4c10-b0cf-72b9fb618a26_testrun-20191ade-2cca-4cf6-b1a8-bbaede16a12b_20251010T145630Z.log†L1-L18】
- The same rerun exercises the run-tests segmentation suites under pytest, yielding two new coverage gate banners (`QualityGate c4edac8b-ad8d-40bc-823e-1583ecb6c43c`, `TestRun 4c6f7af3-6852-44b8-a395-d82eb98714e9`, evidence `47f62c16-c3b7-481d-8b0c-264b2cf403cf`/`8ef0f154-a981-431f-baf6-dd5f46735514`; and `QualityGate d88f23d4-252a-417d-ab6d-e89869d8201e`, `TestRun b0c29e8d-80b2-4a79-8956-39477f9ce4b0`, evidence `307d58ea-9e1a-4bb5-89af-cba91fe9960b`/`a4401f55-85bb-434f-9c31-04e642f9d7ba`) captured in `diagnostics/pytest_unit_testing_test_run_tests_qualitygates-c4edac8b-ad8d-40bc-823e-1583ecb6c43c--d88f23d4-252a-417d-ab6d-e89869d8201e_20251010T145808Z.log`. The assertions still fail, but the knowledge-graph identifiers are now current for coverage analytics.【F:diagnostics/pytest_unit_testing_test_run_tests_qualitygates-c4edac8b-ad8d-40bc-823e-1583ecb6c43c--d88f23d4-252a-417d-ab6d-e89869d8201e_20251010T145808Z.log†L2154-L2230】
- 2025-10-07 05:49 UTC rerun of `poetry run mypy --strict src/devsynth` succeeded after restoring `_ProgressIndicatorBase` as a `TypeAlias`, confirming zero errors and generating `diagnostics/mypy_strict_20251007T054940Z.log` for the refreshed evidence chain.【F:src/devsynth/application/cli/long_running_progress.py†L1-L127】【F:diagnostics/mypy_strict_20251007T054940Z.log†L1-L2】
- A targeted fast-only rerun for `methodology/edrr/reasoning_loop.py` on 2025-10-05 captured 68.89 % coverage (`reasoning_loop_fast.json`) to guide remaining test additions ahead of the aggregate rerun.【F:artifacts/releases/0.1.0a1/fast-medium/20251015T000000Z-fast-medium/reasoning_loop_fast.json†L1-L25】
- Behavior and property suites previously passed with strict marker discipline, but the current smoke failure prevents us from rerunning the verification scripts until the memory Protocol regression is fixed.【F:logs/devsynth_run-tests_smoke_fast_20251004T183142Z.log†L7-L55】

### 2025-10-05 Regression Audit (multi-disciplinary)
- **Test hygiene (QA discipline)** – Targeted `pytest` invocations now surface SyntaxErrors in several unit suites because repository-wide speed markers were injected inside import lists. The parser stops at `pytestmark = [pytest.mark.fast]` before the closing parenthesis, preventing collection entirely.【d62a9a†L12-L33】
- **Plugin discipline (tooling/infra)** – pytest 8+ now rejects the duplicate `pytest_bdd` registration created by nested `pytest_plugins` exports; until we consolidate plugin wiring, every aggregate run fails before any tests collect.【F:logs/devsynth_run-tests_fast_medium_20251006T033632Z.log†L1-L84】
- **Behavior evidence (UX/BDD discipline)** – Earlier WebUI behavior suites referenced `general/*.feature` paths that no longer existed, so pytest-bdd attempted to open `tests/behavior/general/webui.feature` and failed before step bindings executed.【6cd789†L12-L28】 Fresh copies now live under `tests/behavior/features/general/` (for example `webui_bridge.feature` and `complete_sprint_edrr_integration.feature`), and the regenerated `verify_requirements_traceability_20251007T152700Z.txt` / `verify_test_markers_20251007T152710Z.txt` manifests confirm the assets resolve even while other collection regressions remain.【F:tests/behavior/features/general/webui_bridge.feature†L1-L9】【F:tests/behavior/features/general/complete_sprint_edrr_integration.feature†L1-L18】【F:diagnostics/verify_requirements_traceability_20251007T152700Z.txt†L1-L1】【F:diagnostics/verify_test_markers_20251007T152710Z.txt†L1-L77】
- **CLI observability (runtime discipline)** – The long-running progress indicator imports `_ProgressIndicatorBase` before the alias is defined, so every CLI progress suite aborts with `NameError`, blocking both smoke and coverage instrumentation rehearsals.【68488c†L1-L27】
- **Integration provenance (operations discipline)** – Deployment automation integration tests declare `pytestmark` without importing pytest, causing `NameError` and erasing slow-lane coverage. Similar patterns appear across other integration suites.【e85f55†L1-L22】
- **Optional service gating (platform discipline)** – The previously documented fixture regressions remain: Chromadb/Faiss/Kuzu discovery still raises hard errors when extras are absent, and pytest-8 rejects `pytest_plugins` declarations in nested modules. These continue to block collection until addressed.【F:issues/test-collection-regressions-20251004.md†L16-L33】

### 2025-10-07 Multi-Disciplinary Update
- **Tooling (plugin discipline)** – With PR-0 merged, duplicate `pytest_bdd` registration is resolved and collection runs can
  focus on the remaining SyntaxError/IndentationError failures.【F:logs/pytest_collect_only_20251007.log†L1-L40】
- **Typing (tooling discipline)** – `poetry run task mypy:strict` continues to fail on the segmentation helpers, so PR-2 remains
  the highest-priority typing fix before we can refresh knowledge-graph evidence.【F:diagnostics/mypy_strict_20251006T212233Z.log†L1-L32】
- **Runtime (memory/progress)** – Smoke mode still stops on the `MemoryStore` Protocol TypeError and delayed `_ProgressIndicatorBase`
  aliasing, requiring PR-4 before we can validate coverage instrumentation again.【F:logs/devsynth_run-tests_smoke_fast_20251004T183142Z.log†L7-L55】【68488c†L1-L27】
- **QA/BDD (behavior assets)** – Behavior steps retain indentation drift and dangling `feature_path` sentinels, keeping fast+medium
  rehearsals red until PR-1 and PR-3 realign loaders and assets.【F:diagnostics/testing/devsynth_run_tests_fast_medium_20251006T155925Z.log†L1-L25】【6cd789†L12-L28】
- **Documentation/Release (evidence freshness)** – Coverage and typing manifests remain stale; PR-6 will regenerate them once the
  functional fixes above land.【F:test_reports/coverage_manifest_20251012T164512Z.json†L1-L56】

### 2025-10-07T05:50Z strict typing & progress alias synthesis (dialectical + Socratic)
- **Thesis:** Recasting `_ProgressIndicatorBase` as a `TypeAlias` keeps runtime imports identical to `ProgressIndicator` while satisfying strict typing, delivering a green `poetry run mypy --strict src/devsynth` log for the refreshed evidence bundle.【F:src/devsynth/application/cli/long_running_progress.py†L1-L127】【F:diagnostics/mypy_strict_20251007T054940Z.log†L1-L2】
- **Antithesis:** Smoke mode still fails before producing coverage artifacts because optional vector backends import provider factories eagerly, so despite the typing fix the release gates remain red.【F:logs/devsynth_run-tests_smoke_fast_20251007T032155Z.log†L1-L56】
- **Synthesis:** Complete PR-4 by pairing the alias fix with memory Protocol guardrails and optional backend skips, then rerun smoke to capture a passing transcript alongside the strict typing diagnostics before progressing to the coverage gate (PR-6).【F:diagnostics/testing/unit_long_running_progress_20251007T0550Z.log†L1-L28】【F:issues/test-collection-regressions-20251004.md†L70-L101】
- **Socratic validation:** *What remains broken?* Smoke aborts on provider imports, leaving coverage artifacts absent. *What proves success?* A passing smoke log, preserved strict typing evidence, and updated issues/docs referencing both artifacts before triggering the fast+medium rerun.【F:logs/devsynth_run-tests_smoke_fast_20251007T032155Z.log†L1-L56】【F:diagnostics/mypy_strict_20251007T054940Z.log†L1-L2】【F:docs/tasks.md†L330-L347】

### 2025-10-06 Evening Update (multi-disciplinary)
- **Behavior scaffolding (QA discipline)** – `poetry run devsynth run-tests --speed=fast --speed=medium --report --no-parallel` still aborts during collection because multiple behavior step modules contain indentation drift and dangling `feature_path` sentinels; pytest halts before running tests, preventing new coverage evidence. The 2025-10-10 collector rerun shows the repaired step modules import cleanly, with failures now limited to optional dependency gaps (`onnxruntime`, legacy WebUI helpers).【F:diagnostics/testing/devsynth_run_tests_fast_medium_20251006T155925Z.log†L1-L25】【F:diagnostics/pytest_collect_only_20251010T133736Z.log†L5420-L5488】
- **Progress + memory foundations (runtime discipline)** – Smoke mode remains blocked by the `MemoryStore` Protocol TypeError, while `_ProgressIndicatorBase` imports still race; both must be fixed before behavior or CLI regressions can be validated again.【F:logs/devsynth_run-tests_smoke_fast_20251004T183142Z.log†L7-L55】【68488c†L1-L27】
- **Plugin lifecycle (tooling discipline)** – Duplicate `pytest_bdd` registration persists when nested `pytest_plugins` exports load the plugin twice, so every fast+medium rehearsal fails before collection completes.【F:logs/devsynth_run-tests_fast_medium_20251006T033632Z.log†L1-L84】
 - **Verification evidence (quality discipline)** – The 2025-10-06 21:22 UTC rerun regressed the strict mypy gate, so we must repair the segmentation helpers and re-run `poetry run mypy --strict src/devsynth` alongside the fast+medium aggregate and smoke commands to refresh the evidence bundle.【F:diagnostics/mypy_strict_20251006T212233Z.log†L1-L32】【F:diagnostics/typing/mypy_strict_20251127T000000Z.log†L1-L40】【F:docs/plan.md†L1-L42】

## Dialectical Evaluation of RFC Scope
- **Thesis (Ambitious Adoption):** Implement the full RFC (knowledge graph expansion, multi-agent rotation, UI, compliance engine) now to align alpha with long-term vision.
- **Antithesis (Pragmatic Release):** Attempting the full RFC now would prolong the alpha indefinitely; strict typing and coverage already block the release.
- **Synthesis (Targeted Execution):** For v0.1.0a1 prioritize infrastructure that directly affects reliability metrics (typing, coverage, tests, traceability) and leave heavyweight platform upgrades for post-alpha follow-up. RFC elements that provide immediate validation, traceability, or gating remain in-scope; exploratory UX and large-scale backends are deferred.

## Socratic Cross-Examination
1. **What is the release-blocking problem?** Maintainer automation still cannot finish because `task release:prep` stops at the duplicate `overrides` error even though go-task now parses cleanly, and smoke mode continues to abort on the `MemoryStore` Protocol TypeError, so gating evidence remains stale.【F:diagnostics/release_prep_20251004T193235Z.log†L1-L20】【F:logs/devsynth_run-tests_smoke_fast_20251004T183142Z.log†L7-L55】
2. **What proofs confirm remediation?** Passing Taskfile commands, a green smoke log, refreshed strict mypy manifests, and a ≥90 % fast+medium manifest that lifts the EDRR coverage delta.【F:test_reports/coverage_manifest_20251012T164512Z.json†L1-L51】
3. **What resources do we control?** Existing diagnostics, the knowledge-graph linked coverage bundle, prior strict typing artifacts, and the in-repo task/issue tracker.
4. **Which initiatives deliver immediate value?** Taskfile repair, memory Protocol fixes, optional backend guardrails, and documentation/UAT updates directly unblock gating; large RFC expansions remain out-of-scope for the alpha window.【F:docs/tasks.md†L334-L347】
5. **What stops execution today?** Pending ownership of the automation + smoke fixes and outdated issues that still imply readiness; the refreshed PR breakdown assigns responsibilities and sequencing to close this gap.【F:docs/release/v0.1.0a1_execution_plan.md†L31-L62】【F:issues/release-readiness-assessment-v0-1-0a1.md†L52-L82】

## High-Impact Objectives (Pre-Tag)
1. **Consolidate pytest plugin wiring (Completed 2025-10-07)** so pytest-bdd loads exactly once by hoisting nested `pytest_plugins` declarations into root configuration. Before the hoist, fast+medium rehearsals failed during collection with `ValueError: Plugin already registered` because pytest imported `pytest_bdd` twice.【F:logs/devsynth_run-tests_fast_medium_20251006T033632Z.log†L1-L84】 After exporting plugins from the repository root, the regression commands `pytest --collect-only -q` and `pytest -k nothing --collect-only` now complete without duplicate registration, confirming stable collection for both full and deselected discovery passes.【F:logs/pytest_collect_only_20251007.log†L1-L40】【F:logs/pytest_collect_only_20251006T043523Z.log†L1-L24】
2. **Unblock collection hygiene quickly** by repairing misplaced `pytestmark` declarations, behavior step indentation, and missing pytest imports so unit/integration suites import cleanly again without triggering SyntaxError/NameError.【d62a9a†L12-L33】【F:diagnostics/testing/devsynth_run_tests_fast_medium_20251006T155925Z.log†L1-L25】【e85f55†L1-L22】
3. **Close the strict typing regression** by repairing segmentation helpers in `devsynth.testing.run_tests`, expanding unit tests, and rerunning `poetry run mypy --strict` to publish fresh knowledge-graph evidence.【F:diagnostics/mypy_strict_20251006T212233Z.log†L1-L32】【F:diagnostics/typing/mypy_strict_20251127T000000Z.log†L1-L40】
4. **Realign behavior specifications** by correcting scenario paths, regenerating WebUI/UXBridge feature evidence, and ensuring every `.feature` file resolves during `pytest --collect-only -q`, restoring traceability promised in the improvement plan; the new `tests/behavior/features/general/*.feature` copies and refreshed manifests demonstrate the path alignment is in place even as remaining collection hygiene lands.【F:tests/behavior/features/general/webui_bridge.feature†L1-L9】【F:tests/behavior/features/general/complete_sprint_edrr_integration.feature†L1-L18】【F:diagnostics/verify_requirements_traceability_20251007T152700Z.txt†L1-L1】【F:diagnostics/verify_test_markers_20251007T152710Z.txt†L1-L77】
5. **Recover CLI progress and memory foundations** by moving the `_ProgressIndicatorBase` definition ahead of dependent classes, repairing the `MemoryStore` Protocol generics, and validating both with focused smoke/unit tests under strict typing.【68488c†L1-L27】【F:logs/devsynth_run-tests_smoke_fast_20251004T183142Z.log†L7-L55】
6. **Finish outstanding optional-backend guardrails** so resource-dependent suites skip gracefully while pytest 8+ recognises plugin configuration without runtime errors.【F:issues/test-collection-regressions-20251004.md†L16-L33】
7. **Re-run automation and coverage gates** — `task release:prep`, `poetry run mypy --strict src/devsynth`, and `poetry run devsynth run-tests --speed=fast --speed=medium --report --no-parallel` — capturing refreshed artifacts and updating UAT documentation once hygiene fixes land. The 2025-10-09 verification triad reaffirmed that strict mypy still flags the `pydantic` subclasses/Callable generics and that the smoke/fast+medium commands fail during collection; the 2025-10-09 UAT sweep additionally recorded `poetry install` failing with `Could not parse version constraint: <empty>`, so maintainer automation must address the lockfile before reruns can succeed.【F:diagnostics/mypy_strict_src_devsynth_20251006T155640Z.txt†L1-L1】【F:test_reports/coverage_manifest_20251012T164512Z.json†L1-L56】【F:diagnostics/mypy_strict_src_devsynth_20251009T170036Z.txt†L1-L23】【F:diagnostics/devsynth_run_tests_smoke_fast_20251009T170111Z.log†L1-L18】【F:diagnostics/devsynth_run_tests_fast_medium_20251009T170142Z.log†L1-L9】【F:test_reports/coverage_manifest_latest.json†L1-L18】【F:diagnostics/task_release_prep_20251009T175608Z.log†L1-L10】【F:diagnostics/manual_qa_notes_20251009T175712Z.md†L6-L23】
8. **Re-evaluate documentation alignment recommendations** from the critical-improvements dossier once the gates are green, prioritising docs/plan.md follow-ups that close implementation/documentation gaps.【F:docs/analysis/critical_recommendations.md†L1-L74】

## 2025-10-06T22:00Z Dialectical & Socratic Update
- **Thesis:** Archived coverage and earlier strict typing artifacts demonstrate readiness, suggesting we could tag without further remediation.【F:test_reports/coverage_manifest_20251012T164512Z.json†L1-L56】
- **Antithesis:** The latest strict mypy run fails on segmentation helpers and smoke still aborts, so evidence is stale and irreproducible.【F:diagnostics/mypy_strict_20251006T212233Z.log†L1-L32】【F:diagnostics/typing/mypy_strict_20251127T000000Z.log†L1-L40】【F:logs/devsynth_run-tests_smoke_fast_20251004T183142Z.log†L7-L55】
- **Synthesis:** Deliver a short sequence of targeted PRs—typing fix, hygiene cleanup, memory/progress repair, optional backend guards—then regenerate strict mypy, smoke, and fast+medium artifacts while updating documentation and issues per the critical recommendations. This multi-disciplinary approach (tooling, QA, runtime, documentation) keeps us aligned with the improvement plan and ensures reproducible proofs.【F:docs/analysis/critical_recommendations.md†L1-L74】【F:docs/tasks.md†L330-L347】
- **Socratic checklist:**
  1. *What is broken?* Strict mypy segmentation helpers, smoke execution, behavior collection.【F:diagnostics/mypy_strict_20251006T212233Z.log†L1-L32】【F:logs/devsynth_run-tests_smoke_fast_20251004T183142Z.log†L7-L55】【F:diagnostics/testing/devsynth_run_tests_fast_medium_20251006T155925Z.log†L1-L25】
  2. *What proves success?* Zero-error strict mypy log, green smoke transcript, refreshed fast+medium manifest with ≥90 % coverage, and updated issues/docs referencing the new artifacts.【F:test_reports/coverage_manifest_20251012T164512Z.json†L1-L56】【F:docs/tasks.md†L330-L347】
  3. *What disciplines act?* Tooling/infra (typing harness), QA (test hygiene and BDD assets), runtime (memory/progress), documentation (issues + release docs).【F:docs/analysis/critical_recommendations.md†L1-L74】
  4. *What guardrails remain?* Skip TestPyPI, keep workflows dispatch-only, maintain marker discipline, and gate optional services via environment flags until extras install.【F:.github/workflows/ci.yml†L1-L11】【F:docs/tasks.md†L365-L409】

## Pull Request Work Breakdown
| PR | Goal | Key Tasks | Dependencies | Parallelizable? |
|----|------|-----------|--------------|-----------------|
| **PR-0: pytest Plugin Consolidation** *(delivered 2025-10-07)* | Prevent duplicate plugin registration so pytest can collect tests again. | - Hoisted interface-level `pytest_plugins` exports into repository root.<br>- Captured clean `pytest --collect-only -q` transcript proving single plugin registration.<br>- Logged evidence in issues/test-collection-regressions-20251004.md. | None | ✅ Complete; unblocks downstream work. |
| **PR-1: Test Hygiene Hotfix** | Restore import-time stability so the suite collects. | - Move `pytestmark` assignments outside import tuples, repair indentation in behavior steps, and reinstate missing `tests/behavior/requirements_wizard/features/general/*.feature` assets referenced by the suites.<br>- Add missing `import pytest` statements where only `pytestmark` is used and reapply exactly one speed marker per affected WSDE/UXBridge/UI integration test.<br>- Capture targeted `pytest -k nothing` + behavior collection transcripts showing clean import to verify the fix. | PR-0 (ensures plugin manager stabilizes first). | Yes — ready now that PR-0 landed. |
| **PR-2: Strict Typing Segmentation Fix** | Restore `poetry run mypy --strict` to zero errors by repairing segmentation helpers. | - Refactor `devsynth.testing.run_tests` segmentation utilities for stricter typing.<br>- Add targeted unit tests covering segmented run orchestration.<br>- Capture green `diagnostics/mypy_strict_*` logs and publish knowledge-graph IDs. | PR-1 (ensures imports stable). | Yes — can run parallel with PR-3/PR-4 once hygiene lands. |
| **PR-3: Behavior Asset Realignment** | Point behavior scenarios at the actual feature tree and regenerate traceability evidence. | - Update `pytest_bdd.scenarios(...)` paths to `features/general/...` and rerun targeted BDD collections.<br>- Refresh docs/tasks.md §13.1.5 with the corrected locations and link regenerated manifests and behavior coverage snapshots. | PR-0 (plugin wiring) + PR-1 (imports). | Yes — can progress alongside PR-4/PR-5 after prerequisites. |
| **PR-4: CLI Progress & Protocol Foundations** | Fix `_ProgressIndicatorBase` alias timing and audit remaining Protocol generics. | - Hoist the Protocol definition above runtime subclasses, adding regression tests for the CLI progress helpers.<br>- Revisit `_VectorStore`/`MemoryStore` generics to ensure runtime + mypy compatibility.<br>- Validate smoke profile locally before merging. | PR-0 (plugin wiring) + PR-1 (imports). | Yes — orthogonal to PR-3. |
| **PR-5: Optional Backend Guardrails** | Finish fixture migrations so optional services skip cleanly under pytest 8+. | - Adjust `skip_if_missing_backend` to tolerate `ModuleSpec` objects with `None` values.<br>- Guard optional imports with `pytest.importorskip` and speed/resource markers.<br>- Document resource toggles in docs/tasks.md and docs/plan.md. | PR-0/PR-1 (clean collection) | Yes — can run parallel to PR-3/PR-4. |
| **PR-6: Gate Refresh & Documentation Harmony** | Re-run automation, regenerate coverage/typing manifests, and realign release docs with the improvement dossier. | - Execute `task release:prep`, `poetry run mypy --strict src/devsynth`, and the fast+medium aggregate, storing new artifacts.<br>- Update docs/plan.md, docs/tasks.md, and issues/coverage-below-threshold.md with the new evidence.<br>- Cross-check docs/analysis/critical_recommendations.md items and schedule any remaining documentation alignment follow-ups. | PR-0 → PR-5 (requires passing collection, typing, and smoke). | Limited parallelism — final integrative pass. |
| **PR-7: UAT Bundle & Post-Tag Preparation** | Compile UAT evidence, refresh readiness issues, and queue workflow reactivation. | - Capture passing smoke/release-prep/typing logs for UAT sign-off (current attempt logged in `diagnostics/manual_qa_notes_20251009T175712Z.md`).<br>- Update release readiness and post-tag issues with the new sequencing.<br>- Draft the CI trigger reactivation PR for human reviewers (keep dispatch-only triggers until the tag exists; draft diff staged at `artifacts/pr_drafts/re-enable-workflows-post-v0-1-0a1.patch`). | PR-6 (needs green gates). | Sequential finalization step. |

## Parallelization Notes
- PR-0 must land first to stop pytest from aborting on duplicate plugin registration; subsequent hygiene work depends on a stable plugin manager.
- PR-1 repairs SyntaxErrors and missing imports, unlocking the rest of the suite once plugin wiring is stable.
- After PR-1 merges, the strict typing regression (PR-2) and behavior/runtime fixes (PR-3–PR-5) can proceed in parallel because they touch different subsystems.
- PR-6 consolidates automation and evidence once the earlier fixes land; it should branch only after PR-2 through PR-5 pass their targeted collections and smoke.
- PR-7 remains the integration checkpoint wrapping up UAT and post-tag planning.

## Task Board Snapshot
- `docs/typing/strict_typing_wave1.md` — enumerates targeted modules, owners, error counts, and follow-up experiments for the strict typing wave.【F:docs/typing/strict_typing_wave1.md†L1-L29】
- `docs/testing/coverage_wave1.md` — maps low-coverage modules to planned tests, responsible engineers, and knowledge-graph-linked evidence.【F:docs/testing/coverage_wave1.md†L1-L37】
- Update `docs/tasks.md` §21 with new subtasks referencing PR numbers and diagnostics.

## Acceptance Criteria
1. **Typing:** `poetry run mypy --strict src/devsynth` returns exit code 0 with updated suppressions documented and archived under `diagnostics/`.
2. **Testing:** `poetry run devsynth run-tests --speed=fast --speed=medium --report --no-parallel` meets ≥90 % coverage with refreshed HTML/JSON artifacts, and smoke mode (`poetry run devsynth run-tests --smoke --speed=fast --no-parallel --maxfail=1`) passes to prove basic functionality.
3. **Behavior Specs:** All new/updated specs link to BDD features, each test includes one speed marker, behavior step indentation is validated via `pytest --collect-only -q`, and property tests run under `DEVSYNTH_PROPERTY_TESTING=true`.
4. **Documentation:** Issues, release docs, and traceability matrices accurately reflect remaining work and completed items, including the post-tag GitHub Actions reactivation sequence.
5. **Dialectical Audit:** `dialectical_audit.log` receives an entry summarizing the synthesis reached in this plan.

## Immediate Next Steps (Action Items)
0. **Regression suite baselines:** Capture the standing collection and smoke previews with `task tests:collect` and `task tests:smoke-dry-run` so the transcripts under `diagnostics/` prove both `poetry run pytest --collect-only -q` and the smoke dry-run command stay green before attempting heavier rehearsals.【F:Taskfile.yml†L38-L43】【F:Taskfile.yml†L104-L109】
1. **PR-0 delivered:** Hoisted plugin registration on 2025-10-07, replacing the earlier duplicate `pytest_bdd` import failure with clean `pytest --collect-only -q` and `pytest -k nothing --collect-only` transcripts that now serve as regression commands for collection stability.【F:logs/devsynth_run-tests_fast_medium_20251006T033632Z.log†L1-L84】【F:logs/pytest_collect_only_20251007.log†L1-L40】【F:logs/pytest_collect_only_20251006T043523Z.log†L1-L24】
2. Follow with **PR-1** to fix misplaced `pytestmark` declarations, behavior step indentation, and missing pytest imports, capturing clean `pytest -k nothing` and behavior collection transcripts as proof of recovery.【d62a9a†L12-L33】【F:diagnostics/testing/devsynth_run_tests_fast_medium_20251006T155925Z.log†L1-L25】【e85f55†L1-L22】
3. Run **PR-2** (strict typing segmentation fix) in parallel with **PR-3** and **PR-4**: repair the segmentation helpers, update behavior scenario paths, hoist `_ProgressIndicatorBase`, and patch the `MemoryStore` Protocol so typing and smoke return green; record refreshed diagnostics and unit/BDD evidence for each stream.【F:diagnostics/mypy_strict_20251006T212233Z.log†L1-L32】【6cd789†L12-L28】【68488c†L1-L27】【F:logs/devsynth_run-tests_smoke_fast_20251004T183142Z.log†L7-L55】
4. Execute **PR-5** to finish optional backend guardrails, ensuring resource checks no longer halt collection before coverage can run.【F:issues/test-collection-regressions-20251004.md†L16-L33】
5. After PR-0 through PR-5 merge, pursue **PR-6** and **PR-7** sequentially to regenerate automation artifacts, align documentation with the critical recommendations dossier, and compile the UAT/post-tag bundles for maintainer review; ensure the `poetry install` constraint failure is resolved before rerunning `task release:prep`. Draft trigger diff is staged for maintainers at `artifacts/pr_drafts/re-enable-workflows-post-v0-1-0a1.patch`.【F:docs/analysis/critical_recommendations.md†L1-L74】【F:issues/release-finalization-uat.md†L49-L136】【F:issues/re-enable-github-actions-triggers-post-v0-1-0a1.md†L1-L26】【F:diagnostics/task_release_prep_20251009T175608Z.log†L1-L10】【F:diagnostics/manual_qa_notes_20251009T175712Z.md†L1-L30】【F:artifacts/pr_drafts/re-enable-workflows-post-v0-1-0a1.patch†L1-L19】
