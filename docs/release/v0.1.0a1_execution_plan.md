# DevSynth v0.1.0a1 Execution Plan (Updated 2025-10-04)

## Purpose
This document synthesizes the RFC proposal, current diagnostics, and dialectical + Socratic analysis to determine the highest-impact work required before tagging v0.1.0a1. It identifies which RFC initiatives are in-scope for the alpha tag, organizes them into actionable pull requests, and clarifies sequencing and parallelization constraints. The plan assumes no TestPyPI activity per maintainer directive.

## Evidence Baseline (2025-10-04 UTC)
- `poetry run mypy --strict src/devsynth` now succeeds across 432 modules, removing the typing blocker while documenting the strict manifest in diagnostics.【a3596d†L1-L1】
- Smoke-mode `devsynth run-tests --smoke --speed=fast --no-parallel --maxfail=1` fails during collection because multiple suites cannot import required scaffolding or optional backends.【dd1c30†L1-L4】【9ecea8†L1-L164】
- `pytest --collect-only` reproduces 61 collection errors highlighting three dominant failure clusters: (1) `_ProgressIndicatorBase` and related CLI helpers are unavailable to CLI/UX tests, (2) `devsynth.memory.sync_manager` Protocol generics reject concrete parameters, and (3) behavior suites reference `.feature` files that were removed or never checked in.【9ecea8†L1-L164】
- Optional backend tests (Chromadb, Faiss, Kuzu) still import concrete drivers instead of relying on `requires_resource` guards, causing ValueError exceptions when extras are not installed.【9ecea8†L96-L120】
- Coverage gate now passes with 92.40 % coverage (2,601/2,815 statements) captured in the 2025-10-12 fast+medium aggregate; HTML/JSON artifacts plus the manifest and CLI log are archived under `artifacts/releases/0.1.0a1/fast-medium/20251012T164512Z-fast-medium/` with knowledge-graph identifiers for QualityGate/TestRun/ReleaseEvidence references.【F:test_reports/coverage_manifest_20251012T164512Z.json†L1-L56】【F:artifacts/releases/0.1.0a1/fast-medium/20251012T164512Z-fast-medium/devsynth_run_tests_fast_medium_20251012T164512Z.txt†L1-L9】【F:artifacts/releases/0.1.0a1/fast-medium/20251012T164512Z-fast-medium/coverage.json†L1-L152】

## Dialectical Evaluation of RFC Scope
- **Thesis (Ambitious Adoption):** Implement the full RFC (knowledge graph expansion, multi-agent rotation, UI, compliance engine) now to align alpha with long-term vision.
- **Antithesis (Pragmatic Release):** Attempting the full RFC now would prolong the alpha indefinitely; strict typing and coverage already block the release.
- **Synthesis (Targeted Execution):** For v0.1.0a1 prioritize infrastructure that directly affects reliability metrics (typing, coverage, tests, traceability) and leave heavyweight platform upgrades for post-alpha follow-up. RFC elements that provide immediate validation, traceability, or gating remain in-scope; exploratory UX and large-scale backends are deferred.

## Socratic Cross-Examination
1. **What is the release-blocking problem?** Mypy strict failure, sub-90 % coverage, and missing behavior coverage audit trails undermine confidence in the alpha tag.
2. **What proofs confirm remediation?** Passing `poetry run mypy --strict src/devsynth`, ≥90 % aggregate coverage with reproducible artifacts, and updated traceability + behavior reports captured in `test_reports/` and docs.
3. **What resources do we control?** Existing modular tests, diagnostics logs, in-repo issue tracker, and ability to add focused specs/tests without TestPyPI.
4. **Which RFC items produce measurable release impact?** Strengthening typing, coverage instrumentation, WSDE coordination scripts, and traceability dashboards deliver direct release metrics; Web UI explorers or new backends do not.
5. **What stops us from executing now?** Lack of prioritized ownership, absence of dependency graph for fixes, and outdated issue status implying readiness.

## High-Impact Objectives (Pre-Tag)
1. **Stabilize test collection** by restoring missing CLI progress scaffolding, fixing memory Protocol generics, and relocating stray `pytest_plugins` hooks so the suite can run end-to-end.
2. **Reinstate behavior assets and resource guards** ensuring behavior features exist, reference the correct `.feature` paths, and optional backend tests skip cleanly when extras are absent.
3. **Reaffirm strict typing** by keeping the strict gate green as fixes land (no regressions in `mypy --strict`).
4. **Raise combined fast+medium coverage to ≥90 %** once collection succeeds, focusing on CLI orchestration, memory adapters, and WebUI bridges called out in diagnostics.
5. **Refresh traceability + documentation** so issues, specs, and diagnostics mirror the post-triage reality and capture audit evidence for the release board.

## Pull Request Work Breakdown
| PR | Goal | Key Tasks | Dependencies | Parallelizable? |
|----|------|-----------|--------------|-----------------|
| **PR-1:** Test Collection Stabilization | Restore CLI progress scaffolding and move `pytest_plugins` declarations so unit/behavior suites import successfully. | - Re-export `_ProgressIndicatorBase` (and related helpers) from CLI modules consumed by tests.<br>- Relocate `pytest_plugins` into a repository-level conftest and update imports.<br>- Fix `pytestmark` syntax regression in `tests/unit/general/test_retry_failure_scenarios.py` and similar files. | None | Must land first to unblock the rest. |
| **PR-2:** Memory Protocol Typing Fixes | Repair Protocol generics and adapter type hints that crash imports. | - Replace `Protocol["ValueT"]` usages with `TypeVar`-driven definitions that satisfy mypy + runtime checks.<br>- Add targeted unit tests for `SyncManager` initialization to prove the contract.<br>- Keep strict typing green after refactors (`mypy --strict`). | PR-1 (ensures tests can import long-running progress helpers used in shared fixtures). | Can proceed once PR-1 merges. |
| **PR-3:** Optional Backend Guardrails | Ensure optional integration tests skip gracefully when extras are missing. | - Wrap backend discovery in `pytest.importorskip` and environment-driven guards.<br>- Document resource flags in `tests/fixtures/resources.py` and align docs.<br>- Provide smoke fixtures that fall back to stubs when drivers are absent. | PR-1 (shared conftest) | Parallel with PR-2; different files. |
| **PR-4:** Behavior Asset Realignment | Restore `.feature` files and update behavior tests to point at the right locations. | - Recreate or relocate referenced `.feature` files for UXBridge/WebUI suites.<br>- Update behavior step loaders to new paths and regenerate traceability matrix.<br>- Add coverage markers to any new behavior tests. | PR-1 (shared conftest), plus PR-3 if new features rely on resource guards. | Parallel with PR-2/3 once scaffolding lands; coordinate on shared behavior directories. |
| **PR-5:** Coverage & Final Validation | Drive ≥90 % coverage and finalize release evidence. | - Execute fast+medium aggregate once PR-1–4 land, capturing HTML/JSON artifacts.<br>- Backfill tests for CLI, memory, and WebUI hotspots identified in diagnostics.<br>- Update release docs, readiness checklist, and changelog with final metrics. | PR-2, PR-3, PR-4 completion. | Sequential integration step. |

## Parallelization Notes
- PR-1 unlocks the rest; without working imports and conftest layout, parallel execution stalls.
- PR-2 (memory typing) and PR-3 (resource gating) operate on disjoint modules and can run in parallel once PR-1 merges.
- PR-4 shares directories with PR-3 when behavior features depend on resource guards; coordinate branch boundaries but most authoring work can proceed in parallel after PR-1.
- PR-5 remains the sequential integration checkpoint once prior work lands.

## Task Board Snapshot
- `docs/typing/strict_typing_wave1.md` (to be created) — enumerates targeted modules, owners, error counts, and fix approaches.
- `docs/testing/coverage_wave1.md` (to be created) — maps low-coverage modules to planned tests and responsible engineers.
- Update `docs/tasks.md` §21 with new subtasks referencing PR numbers and diagnostics.

## Acceptance Criteria
1. **Typing:** `poetry run mypy --strict src/devsynth` returns exit code 0 with updated suppressions documented.
2. **Testing:** Fast+medium aggregate via CLI meets ≥90 % coverage, leaving artifacts in `htmlcov/` and `test_reports/`.
3. **Behavior Specs:** All new/updated specs link to BDD features, each test includes one speed marker, and property tests run under `DEVSYNTH_PROPERTY_TESTING=true`.
4. **Documentation:** Issues, release docs, and traceability matrices accurately reflect remaining work and completed items.
5. **Dialectical Audit:** `dialectical_audit.log` receives an entry summarizing the synthesis reached in this plan.

## Immediate Next Steps (Action Items)
1. Merge PR-1 updates (stabilized tests + refreshed planning docs) to establish the baseline captured here.
2. Launch memory typing fixes (PR-2) and resource guard hardening (PR-3) in parallel while behavior authors start PR-4 drafting.
3. Hold daily triage using updated diagnostics (`logs/devsynth.log`, `diagnostics/pytest_collect_*.log`) to confirm the collection error count drops to zero.
4. After PR-2–4 converge, execute PR-5 coverage sweeps and publish evidence in release docs.

